#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

void fils(int p[2], int f[2]) {
    close(p[1]);
    close(f[0]);

    int entier;
    for (int i = 0; i < 5; i++) {
        read(p[0], &entier, sizeof(int));
        entier *= 2;
        write(f[1], &entier, sizeof(int));
    }

    close(p[0]);
    close(f[1]);

    exit(0);
}

int main() {
    int p[2], f[2];

    pipe(p);
    pipe(f);

    pid_t pid = fork();
    if (pid == 0) {
        fils(p, f);
    }

    close(p[0]);
    close(f[1]);

    int entier = 10;
    for (int i = 0; i < 5; i++) {
        write(p[1], &entier, sizeof(int));
        read(f[0], &entier, sizeof(int));
        entier += 5;
    }

    close(p[1]);
    close(f[0]);

    wait(NULL);

    return 0;
}
