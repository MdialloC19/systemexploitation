#include <errno.h>
#include <signal.h>
#include <sys/wait.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int cpt = 0;

void handler(int signum) {
    if (signum == SIGUSR1) {
        printf("Signal 1 recu\n");
        cpt = cpt + 1;
    }
    if (signum == SIGUSR2) {
        printf("Signal 2 recu\n");
        cpt = cpt + 2;
    }
}

int main() {
    if (signal(SIGUSR1, handler) == SIG_ERR) {
        perror("Erreur lors du positionnement du signal SIGUSR1");
        exit(EXIT_FAILURE);
    }
    if (signal(SIGUSR2, handler) == SIG_ERR) {
        perror("Erreur lors du positionnement du signal SIGUSR2");
        exit(EXIT_FAILURE);
    }

    printf("Pret a recevoir des signaux. Mon PID : %d\n", getpid());
    while (cpt != 3) {
        sleep(1);
    }

    return EXIT_SUCCESS;
}
