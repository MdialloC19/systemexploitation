/**
 * @author Dr Nandicou BA 
 * @version 16/01/2027 
*/
#include <stdlib.h>
#include <signal.h>
#include <errno.h>
#include <unistd.h>
#include <stdio.h>


#define DELAI 1

void traitement (int numero_signal){
    printf("\n Reception du Signal %d => ",numero_signal);
    switch(numero_signal) {
        case SIGTSTP :
            printf ("Je m'endors...\n"); 
            kill (getpid(), SIGSTOP);
            printf ("Je me rÃ©veille !\n"); 
            signal (SIGTSTP, traitement );
            break ;
        case SIGINT :
            //printf("Erreur");
            //break;
            signal (SIGINT, SIG_DFL );
            //kill(getpid(), SIGINT);
            //break;
        case SIGTERM:
        printf("Fin du programme.\n") ;
        //exit (EXIT_SUCCESS) ;
        break;
        }
}

int main (void) {
    printf("Mon PID est %d =>",getpid());
    signal(SIGTSTP, traitement);
    signal(SIGINT , traitement );
    signal(SIGTERM, traitement) ;
    printf("attente de reception d'un signal \n");
    while (1){
        sleep (DELAI) ;
        printf(".") ;   
        fflush (stdout) ;
    }
    printf("fin\n");
    exit (EXIT_SUCCESS);
}