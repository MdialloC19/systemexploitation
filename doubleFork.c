#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/wait.h>
int main()
{
    pid_t status, pid1;
    int i = 0;
    status = fork();
    switch (status)
    {
    case -1:
        perror("Erreur de création de processus");
        return 1;
    case 0: //

        switch (fork())
        {
        case -1:
            perror("Erreur de creation de processus intermediare");
            return 1;
        case 0:
            printf("Processus [%d], Mon Père : [%d] \n", getpid(), getppid());
            sleep(5);
            printf("Processus [%d], Mon père : [%d] \n", getpid(), getppid());
            break;
        default:
            return 0;
        }
        break;
    default:
        // sleep(10);

        while ((pid1 = wait(&status)))
        {
            printf("J'attend la terminaison de mon premier fils, \t [%d]\n", pid1);
            i++;
            if (i == 10)
                break;
        }
        printf(" mon premier fils à terminer");
        break;
    }
    exit(EXIT_SUCCESS);
}
